<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NotifyBot - Advanced Email Campaign Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .nav {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }
        
        .nav h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .nav ul {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .nav a {
            color: #3498db;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: block;
            border: 1px solid transparent;
        }
        
        .nav a:hover {
            background: #3498db;
            color: white;
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(52, 152, 219, 0.3);
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 1.4rem;
            margin: 25px 0 15px 0;
        }
        
        .section h4 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin: 20px 0 10px 0;
        }
        
        /* Custom bullet points */
        ul:not(.nav ul) {
            list-style: none;
            padding-left: 0;
        }
        
        ul:not(.nav ul) li {
            position: relative;
            padding-left: 30px;
            margin-bottom: 8px;
        }
        
        ul:not(.nav ul) li::before {
            content: "▶";
            position: absolute;
            left: 0;
            top: 0;
            color: #3498db;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        /* Different bullet styles for nested lists */
        ul:not(.nav ul) ul li::before {
            content: "◆";
            color: #2ecc71;
        }
        
        ul:not(.nav ul) ul ul li::before {
            content: "●";
            color: #e74c3c;
        }
        
        .highlight {
            background: linear-gradient(135deg, #87ceeb, #b0e0e6);
            color: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(135, 206, 235, 0.3);
        }
        
        .highlight h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .code-block {
            background: #1a1a1a;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #333;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-wrap;
        }
        
        .code-block .comment {
            color: #75715e;
        }
        
        .code-block .keyword {
            color: #66d9ef;
        }
        
        .code-block .string {
            color: #a6e22e;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 5px solid #f39c12;
        }
        
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 5px solid #17a2b8;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 5px solid #28a745;
        }
        
        .file-structure {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            border: 1px solid #dee2e6;
            margin: 15px 0;
            white-space: pre;
            overflow-x: auto;
            line-height: 1.4;
        }
        
        .file-structure .folder {
            color: #3498db;
            font-weight: bold;
        }
        
        .file-structure .file {
            color: #2ecc71;
        }
        
        .file-structure .comment {
            color: #7f8c8d;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #3498db;
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
            background: #3498db;
            border-radius: 20px;
            margin: 2px;
        }
        
        .badge.required {
            background: #e74c3c;
        }
        
        .badge.optional {
            background: #95a5a6;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
        }
        
        .button-link {
            display: inline-block;
            background: linear-gradient(45deg, #3498db, #2ecc71);
            color: white;
            padding: 12px 20px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .button-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
            color: white;
        }
        
        .important {
            background: #ffe6e6;
            padding: 15px;
            border-left: 6px solid #cc0000;
            margin: 20px 0;
            font-weight: bold;
            color: #660000;
            border-radius: 6px;
        }
        
        .tip {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 5px solid #17a2b8;
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.1);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #3498db;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .feature-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .footer {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            text-align: center;
            padding: 30px;
            border-radius: 10px;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .nav ul {
                grid-template-columns: 1fr;
            }
        }
        
        .toc {
            position: sticky;
            top: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="emoji">🚀</span>NotifyBot User Runbook</h1>
            <p>Advanced Email Notification Management System</p>
        </div>

        <div class="section features">
            <p>
                <strong>NotifyBot</strong>, our smart, scalable solution for email automation.  
                Whether you're sending a handful of emails or thousands, NotifyBot makes it effortless, safe, and efficient.  
                It supports both single and multi modes, with dry-run and signature capabilities.
            </p>
            <ul class="feature-list">
                <li>📧 <strong>Batch Email Sending</strong>: Deliver emails in customizable batches with controlled delays</li>
                <li>🖋️ <strong>HTML Email Support</strong>: Craft rich, styled messages (with attachments!)</li>
                <li>🎯 <strong>Recipient Filtering</strong>: Easily target the right audience with CSV filters</li>
                <li>🧪 <strong>Dry Run Mode</strong>: Test configurations safely without sending actual emails</li>
                <li>✅ <strong>Email Validation</strong>: Automatically validate addresses to reduce bounces</li>
                <li>📎 <strong>Attachment Support</strong>: Attach files up to 15MB each</li>
                <li>🔁 <strong>Deduplication</strong>: Automatically remove duplicate recipients</li>
                <li>📊 <strong>Logging & Transparency</strong>: Detailed logs with automatic log rotation</li>
            </ul>
            <p><em>Stay in control. Stay efficient. That's the NotifyBot way.</em></p>
        </div>

        <div class="important">
            ⚠️ <strong>Critical Disclaimer:</strong><br><br>
            📧 Always run NotifyBot in <code>--dry-run</code> mode first to verify recipients and content.<br>
            ❌ Do <strong>not</strong> use <code>--force</code> unless running in a fully automated script with prior approval.<br>
            ⚠️ Running live without a dry-run review may result in unintended mass emails.<br>
            📂 The <code>&lt;user-basefolder&gt;</code> is the directory where you must maintain all required input files 
            (e.g. <code>subject.txt</code>, <code>body.html</code>, <code>to.txt</code>).
        </div>

        <div class="important">
            💡 <strong>Tip:</strong> Always replace <code>&lt;user-basefolder&gt;</code> in the examples below with the name of your campaign folder inside <code>/notifybot/basefolder/</code>.  
            Example: If your folder is <code>newsletter_august</code>, use:  
            <br><code>/notifybot/venv/bin/python notifybot.py --base-folder newsletter_august --dry-run</code>
        </div>

        <div class="nav toc">
            <h3><span class="emoji">📋</span>Table of Contents</h3>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#directory-structure">Directory Structure</a></li>
                <li><a href="#operating-modes">Operating Modes</a></li>
                <li><a href="#field-validation">Field Validation System</a></li>
                <li><a href="#filter-syntax">Filter Syntax</a></li>
                <li><a href="#template-substitution">Template Substitution</a></li>
                <li><a href="#recipient-sources">Recipient Sources</a></li>
                <li><a href="#file-formats">File Format Specifications</a></li>
                <li><a href="#features">Key Features</a></li>
                <li><a href="#logging">Logging</a></li>
                <li><a href="#usage">Usage Examples</a></li>
            </ul>
        </div>

        <div class="section" id="overview">
            <h2><span class="emoji">🎯</span>Overview</h2>
            <p>NotifyBot is a sophisticated email automation tool supporting both single and multi-mode campaigns with template personalization, batch processing, image embedding, and comprehensive recipient management through CSV-based filtering.</p>
            
            <div class="highlight">
                <h3>Key Capabilities</h3>
                <ul>
                    <li><strong>SINGLE MODE:</strong> One email campaign to all matching recipients</li>
                    <li><strong>MULTI MODE:</strong> Multiple personalized emails based on filter conditions</li>
                    <li>Dry-run testing with draft emails to approvers</li>
                    <li>Batch processing with configurable delays</li>
                    <li>HTML email with embedded images and attachments</li>
                    <li>Advanced filtering with regex and wildcard support</li>
                    <li>Comprehensive logging and audit trails</li>
                </ul>
            </div>
        </div>

        <div class="section" id="directory-structure">
            <h2><span class="emoji">📁</span>Directory Structure</h2>
            
            <div class="file-structure">/notifybot/                          <span class="comment"># Root directory</span>
├── basefolder/                      <span class="comment"># Base folder for all campaigns</span>
│   └── &lt;campaign-name&gt;/             <span class="comment"># Individual campaign folder</span>
│       ├── subject.txt              <span class="comment"># Email subject line</span>
│       ├── body.html                <span class="comment"># Email body (HTML format)</span>
│       ├── from.txt                 <span class="comment"># Sender email address</span>
│       ├── approver.txt             <span class="comment"># Approver emails for dry-run mode</span>
│       ├── to.txt                   <span class="comment"># Direct recipient list (optional)</span>
│       ├── cc.txt                   <span class="comment"># CC recipients (optional)</span>
│       ├── bcc.txt                  <span class="comment"># BCC recipients (optional)</span>
│       ├── additional_to.txt        <span class="comment"># Additional TO recipients (optional)</span>
│       ├── filter.txt               <span class="comment"># Filter conditions (required for multi-mode)</span>
│       ├── field.txt                <span class="comment"># Field names for template substitution (optional)</span>
│       ├── mode.txt                 <span class="comment"># Mode specification: 'single' or 'multi' (optional)</span>
│       ├── table-columns.txt        <span class="comment"># Column specification for dynamic tables (conditional)</span>
│       ├── field-inventory.csv      <span class="comment"># Local field inventory (optional)</span>
│       ├── attachment/              <span class="comment"># Folder for file attachments (optional)</span>
│       │   └── *.* (files)          <span class="comment"># Attachment files (15MB total limit)</span>
│       ├── images/                  <span class="comment"># Folder for email images (optional)</span>
│       │   └── *.{jpg,png,gif}      <span class="comment"># Image files for embedding</span>
│       └── recipients/              <span class="comment"># Auto-generated recipient backups</span>
├── inventory/
│   └── inventory.csv                <span class="comment"># Global recipient database</span>
├── signature.html                   <span class="comment"># Global email signature (optional)</span>
└── logs/
    └── notifybot.log                <span class="comment"># Comprehensive execution logs</span></div>
        </div>

        <div class="section" id="operating-modes">
            <h2><span class="emoji">⚙️</span>Operating Modes</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h4><span class="emoji">📤</span>SINGLE MODE</h4>
                    <ul>
                        <li>Sends ONE email to all matching recipients</li>
                        <li>Recipients from: to.txt, filter.txt, additional_to.txt</li>
                        <li>Template personalization using field substitution</li>
                        <li>Batch processing for large recipient lists</li>
                        <li><strong>Example:</strong> Company-wide announcement</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">📬</span>MULTI MODE</h4>
                    <ul>
                        <li>Sends MULTIPLE personalized emails</li>
                        <li>Each filter condition generates separate email</li>
                        <li>Recipients filtered from inventory.csv per condition</li>
                        <li>Dynamic table generation support</li>
                        <li><strong>Example:</strong> Department-specific notifications</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="field-validation">
            <h2><span class="emoji">✅</span>Field Validation System</h2>
            
            <p>Priority-based validation ensures data integrity:</p>
            
            <div class="info">
                <h4>1. FILTER VALIDATION (filter.txt):</h4>
                <ul>
                    <li>Always validated against /notifybot/inventory/inventory.csv</li>
                    <li>If local field-inventory.csv exists, also validated against it</li>
                    <li>All filter field names must exist in inventory headers</li>
                </ul>
            </div>
            
            <div class="info">
                <h4>2. FIELD VALIDATION (field.txt):</h4>
                <ul>
                    <li>Priority: local field-inventory.csv > global inventory.csv</li>
                    <li>Used for template substitution and dynamic table generation</li>
                    <li>Dynamic table fields require table-columns.txt</li>
                </ul>
            </div>
            
            <div class="warning">
                <h4>3. STRICT DYNAMIC TABLE VALIDATION:</h4>
                <ul>
                    <li>If any dynamic table field requested: table-columns.txt MUST exist</li>
                    <li>table-columns.txt MUST be non-empty</li>
                    <li>All columns MUST exist in chosen inventory file</li>
                </ul>
            </div>
        </div>

        <div class="section" id="filter-syntax">
            <h2><span class="emoji">🔍</span>Filter Syntax</h2>
            
            <p>Supports advanced filtering with multiple operators:</p>
            
            <h3>Operators</h3>
            <table>
                <thead>
                    <tr>
                        <th>Operator</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>=</code></td>
                        <td>Exact match (case-insensitive)</td>
                        <td><code>department="sales"</code></td>
                    </tr>
                    <tr>
                        <td><code>!=</code></td>
                        <td>Not equal</td>
                        <td><code>region!="europe"</code></td>
                    </tr>
                    <tr>
                        <td><code>=~</code></td>
                        <td>Regex match</td>
                        <td><code>name=~".*Manager.*"</code></td>
                    </tr>
                    <tr>
                        <td><code>!~</code></td>
                        <td>Regex not match</td>
                        <td><code>email!~".*(test|demo).*"</code></td>
                    </tr>
                    <tr>
                        <td><code>*,?,[]</code></td>
                        <td>Wildcard match</td>
                        <td><code>status=active*</code></td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Logic Operations</h3>
            <div class="code-block"><span class="comment"># AND logic: Same line, comma-separated</span>
department="sales",region="north"

<span class="comment"># OR logic: Different lines</span>
department="sales"
department="marketing"
            </div>
            
            <h3>Complex Examples</h3>
            <div class="code-block"><span class="comment"># Department-based filtering</span>
department="engineering"

<span class="comment"># Exclude test accounts</span>
email!~".*(test|demo|staging).*"

<span class="comment"># Multiple conditions (AND)</span>
department="sales",status="active",region!="asia"

<span class="comment"># Complex regex patterns</span>
title=~".*(Manager|Director|VP).*"
            </div>
        </div>

        <div class="section" id="template-substitution">
            <h2><span class="emoji">🎨</span>Template Substitution</h2>
            
            <p>Field values from inventory.csv can be substituted into templates:</p>
            
            <h3>Basic Substitution</h3>
            <div class="code-block"><span class="comment">Template:</span> "Hello {name}, welcome to {department}!"
<span class="comment">Result:</span>   "Hello John Smith, welcome to Engineering!"
            </div>
            
            <h3>Dynamic Tables</h3>
            <table>
                <thead>
                    <tr>
                        <th>Placeholder</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>{dynamic_table}</code></td>
                        <td>Complete HTML table with styling</td>
                    </tr>
                    <tr>
                        <td><code>{table_rows}</code></td>
                        <td>Table rows only</td>
                    </tr>
                    <tr>
                        <td><code>{styled_table_rows}</code></td>
                        <td>Striped table rows</td>
                    </tr>
                    <tr>
                        <td><code>{simple_table_rows}</code></td>
                        <td>Simple table rows</td>
                    </tr>
                    <tr>
                        <td><code>{csv_table_rows}</code></td>
                        <td>Pipe-separated rows</td>
                    </tr>
                    <tr>
                        <td><code>{table_headers}</code></td>
                        <td>Table headers only</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Comma-Separated Value Formatting</h3>
            <div class="code-block"><span class="comment">Single:</span>   {skills} → "Python"
<span class="comment">Multiple:</span> {skills} → "Python, Java, and JavaScript"
<span class="comment">Many:</span>     {skills} → "Python, Java, JavaScript, and 12 more"
            </div>
        </div>

        <div class="section" id="recipient-sources">
            <h2><span class="emoji">👥</span>Recipient Sources</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h4>SINGLE MODE <span class="badge required">requires at least ONE</span></h4>
                    <ul>
                        <li><strong>to.txt:</strong> Direct email list (semicolon-separated)</li>
                        <li><strong>filter.txt + inventory.csv:</strong> Filtered recipients</li>
                        <li><strong>additional_to.txt:</strong> Additional recipients (merged)</li>
                        <li><strong>cc.txt:</strong> CC recipients (added to all emails)</li>
                        <li><strong>bcc.txt:</strong> BCC recipients (added to all emails)</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>MULTI MODE <span class="badge required">required</span></h4>
                    <ul>
                        <li><strong>filter.txt:</strong> Multiple filter conditions</li>
                        <li><strong>inventory.csv:</strong> Source database for filtering</li>
                        <li><strong>cc.txt, bcc.txt:</strong> Added to each individual email</li>
                        <li><strong>additional_to.txt:</strong> Added to each filtered list</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="file-formats">
            <h2><span class="emoji">📄</span>File Format Specifications</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h4>TEXT FILES (.txt)</h4>
                    <ul>
                        <li>UTF-8 encoding required</li>
                        <li>Line endings: Unix (LF) or Windows (CRLF)</li>
                        <li>Email lists: semicolon-separated, one per line</li>
                        <li>Comments: Lines starting with # are ignored</li>
                        <li>Empty lines: Ignored</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>HTML FILES</h4>
                    <ul>
                        <li>Valid HTML5 structure recommended</li>
                        <li>Inline CSS preferred for email compatibility</li>
                        <li>Image references: relative paths to images/ folder</li>
                        <li>Template placeholders: {fieldname} syntax</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4>CSV FILES</h4>
                    <ul>
                        <li>UTF-8 encoding with BOM support</li>
                        <li>Headers required in first row</li>
                        <li>Email field: semicolon-separated for multiple emails</li>
                        <li>Proper CSV escaping for special characters</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="features">
            <h2><span class="emoji">✨</span>Key Features</h2>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h4><span class="emoji">📎</span>Attachment System</h4>
                    <ul>
                        <li>Any file type allowed</li>
                        <li>Total size limit: 15MB per campaign</li>
                        <li>Automatic MIME type detection</li>
                        <li>Safe filename sanitization</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">🖼️</span>Image Embedding</h4>
                    <ul>
                        <li>Automatic HTML img tag processing</li>
                        <li>Inline image embedding (cid: references)</li>
                        <li>Supported formats: JPEG, PNG, GIF, WebP</li>
                        <li>External URL warning (not embedded)</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">⚡</span>Batch Processing</h4>
                    <ul>
                        <li>Default batch size: 500 recipients</li>
                        <li>Configurable delay between batches: 5.0 seconds</li>
                        <li>Automatic retry on temporary failures</li>
                        <li>Progress logging per batch</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">🧪</span>Dry-Run Testing</h4>
                    <ul>
                        <li>Sends DRAFT emails to approvers only</li>
                        <li>Subject prefixed with "DRAFT -"</li>
                        <li>Shows original recipient counts</li>
                        <li>Generates recipient backup files</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">📊</span>Logging System</h4>
                    <ul>
                        <li>CSV-based structured logging</li>
                        <li>Location: /notifybot/logs/notifybot.log</li>
                        <li>Emoji-coded message levels</li>
                        <li>Detailed operation tracking</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h4><span class="emoji">🔒</span>Security Features</h4>
                    <ul>
                        <li>Sender address validation</li>
                        <li>Path traversal prevention</li>
                        <li>Safe filename sanitization</li>
                        <li>Comprehensive audit logging</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="logging">
            <h2><span class="emoji">📊</span>Logging</h2>
            <p>Logs are written to <code>/notifybot/logs/notifybot.log</code> in CSV format with emojis for quick scanning.</p>
            <div class="code-block">ℹ️ Info, ⚠️ Warning, ❌ Error, ✅ Success, 📝 Draft, 🔧 Mode</div>
            <p>
              📡 All logs are also forwarded in real-time to <strong>Splunk</strong> for auditing and long-term reference.
            </p>
            <a class="button-link" href="https://tinyurl/notifybot" target="_blank">📊 Open Splunk Dashboard</a>
        </div>

        <div class="section" id="usage">
            <h2><span class="emoji">🚀</span>Usage Examples</h2>
            
            <div class="code-block"># Dry-run mode (always recommended first)
/notifybot/venv/bin/python notifybot.py --base-folder &lt;user-basefolder&gt; --dry-run

# Live mode (single, default)
/notifybot/venv/bin/python notifybot.py --base-folder &lt;user-basefolder&gt;

# Live mode (multi) with custom batch size and delay
/notifybot/venv/bin/python notifybot.py --base-folder &lt;user-basefolder&gt; --mode multi --batch-size 500 --delay 5.0</div>
            
            <h3>Command Line Interface</h3>
            
            <div class="important">
                <strong>Required Arguments:</strong><br><br>
                <code>--base-folder FOLDER</code> - Campaign folder name in /notifybot/basefolder/
            </div>
            
            <div class="info">
                <h4>Optional Arguments:</h4>
                <ul>
                    <li><code>--mode {single,multi}</code> - Override mode.txt setting</li>
                    <li><code>--dry-run</code> - Send drafts to approvers only</li>
                    <li><code>--force</code> - Skip confirmation prompts</li>
                    <li><code>--batch-size N</code> - Emails per batch (default: 500)</li>
                    <li><code>--delay SECONDS</code> - Delay between batches (default: 5.0)</li>
                </ul>
            </div>
            
            <h3>Example Commands</h3>
            
            <div class="code-block"><span class="comment"># Dry-run test</span>
notifybot.py --base-folder newsletter --dry-run

<span
